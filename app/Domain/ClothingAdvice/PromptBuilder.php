<?php

namespace App\Domain\ClothingAdvice;

class PromptBuilder
{
  public function build(array $weatherData): string
  {
    // 取得した天気情報を元にプロンプトを作成
    return <<<PROMPT
      あなたはファッションの専門家です。以下の天気情報を元に、ユーザーが快適に過ごせる服装のアドバイスを日本語で提案してください。

      【天気データ】
        - 最高気温: {$weatherData['max']}℃
        - 最低気温: {$weatherData['min']}℃
        - 降水確率（最大）: {$weatherData['pop']}%
        - 降水確率（平均）: {$weatherData['avgPop']}%
        - 平均湿度: {$weatherData['humidityAvg']}%
        - 平均風速: {$weatherData['windAvg']} m/s

      【制約】
        - 出力は150文字以内
        - 読者は20代の一般的な男女
        - TPOは日常の外出を想定
        - 必ず以下の4カテゴリについて触れてください:
          1. トップス
          2. ボトムス
          3. シューズ
          4. アウター（必要なら）
        - アクセサリーや小物（帽子・傘・バッグなど）は必要に応じて触れても良い
        - 季節や気温に応じて具体的なアイテム名（Tシャツ、ジャケット、スニーカーなど）を含めてください
        - 避けた方がよい服装があれば簡単に補足してください

        【出力例】
        例: 「昼は25℃で暑いため半袖Tシャツに薄手のパンツを。足元はスニーカーで快適に。夜は冷えるので軽めのジャケットを持参すると安心。雨の可能性があるので折りたたみ傘も。」

        以上を踏まえて、今日の服装アドバイスをお願いします。
    PROMPT;
  }
}
